#define TAPPING_TERM 280
/*                                      42 KEY MATRIX / LAYOUT MAPPING

  ╭────────────────────────┬────────────────────────╮
  │  0   1   2   3   4   5 │  6   7   8   9  10  11 │
  │ 12  13  14  15  16  17 │ 18  19  20  21  22  23 │
  │ 24  25  26  27  28  29 │ 30  31  32  33  34  35 │
  ╰───────────╮ 36  37  38 │ 39  40  41 ╭───────────╯
              ╰────────────┴────────────╯               */

#define KEYS_L 0 1 2 3 4 5 12 13 14 15 16 17 24 25 26 27 28 29
#define KEYS_R 6 7 8 9 10 11 18 19 20 21 22 23 30 31 32 33 34 35
#define THUMBS 36 37 38 39 40 41

/ {
  behaviors {
    u_hrml: u_hrml {
      compatible = "zmk,behavior-hold-tap";
      #binding-cells = <2>;
      tapping-term-ms = <TAPPING_TERM>;
      flavor = "balanced";
      bindings = <&kp>, <&kp>;
      quick-tap-ms = <175>;                // repeat on tap-into-hold
      require-prior-idle-ms = <150>;
      hold-trigger-key-positions = <KEYS_R THUMBS>;
      hold-trigger-on-release;             // delay positional check until key-release
    };
    u_hrmr: u_hrmr {
      compatible = "zmk,behavior-hold-tap";
      #binding-cells = <2>;
      tapping-term-ms = <TAPPING_TERM>;
      flavor = "balanced";
      bindings = <&kp>, <&kp>;
      quick-tap-ms = <175>;                // repeat on tap-into-hold
      require-prior-idle-ms = <150>;
      hold-trigger-key-positions = <KEYS_L THUMBS>;
      hold-trigger-on-release;             // delay positional check until key-release
    };
  };
};

/ {
    combos {
        // Combo for left parenthesis key
        compatible = "zmk,combos";
        combo_colon {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <19 20 21>;
            bindings = <&kp COLN>;
        };
        combo_single_quote {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <7 8>;
            bindings = <&kp SQT>;
        };
        combo_double_quote {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <8 9>;
            bindings = <&kp DQT>;
        };
        combo_q {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <2 3>;
            bindings = <&kp Q>;
        };

        combo_lbrc {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <18 19>;
            bindings = <&kp LBRC>;
        };
        combo_lpar {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <19 20>;
            bindings = <&kp LPAR>;
        };
        combo_lbkt {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <20 21>;
            bindings = <&kp LBKT>;
        };
        combo_lt {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <21 22>;
            bindings = <&kp LT>;
        };

        combo_rbrc {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <30 31>;
            bindings = <&kp RBRC>;
        };
        combo_rpar {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <31 32>;
            bindings = <&kp RPAR>;
        };
        combo_rbkt {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <32 33>;
            bindings = <&kp RBKT>;
        };
        combo_gt {
            layers = <0>;
            timeout-ms = <50>;
            key-positions = <33 34>;
            bindings = <&kp GT>;
        };

    };
};

